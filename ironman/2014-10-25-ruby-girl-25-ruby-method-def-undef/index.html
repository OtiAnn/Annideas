<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><title>Ruby女孩(25)：來認識方法的定義與解除！</title><meta content="Ruby女孩(25)：來認識方法的定義與解除！" name="title" /><meta content="Ruby女孩(25)：來認識方法的定義與解除！" property="og:title" /><meta content="陳祐禎 Annie Chen" name="author" /><meta content="陳祐禎 Annie Chen" property="og:author" /><meta content="http://blog.annideas.com/ironman/2014-10-25-ruby-girl-25-ruby-method-def-undef/" name="url" /><meta content="http://blog.annideas.com/ironman/2014-10-25-ruby-girl-25-ruby-method-def-undef/" property="og:url" /><meta content="我是Annie，我參加iThome在2014年舉辦的第七屆iT邦幫忙鐵人賽，連續30天不中斷地記錄自己學習Ruby的歷程，這一系列30篇文章，推薦給跟我一樣初學Ruby約半年的朋友參考。" name="description" /><meta content="我是Annie，我參加iThome在2014年舉辦的第七屆iT邦幫忙鐵人賽，連續30天不中斷地記錄自己學習Ruby的歷程，這一系列30篇文章，推薦給跟我一樣初學Ruby約半年的朋友參考。" property="og:description" /><meta content="我是Annie，我參加iThome在2014年舉辦的第七屆iT邦幫忙鐵人賽，連續30天不中斷地記錄自己學習Ruby的歷程，這一系列30篇文章，推薦給跟我一樣初學Ruby約半年的朋友參考。" itemprop="description" /><meta content="website" name="type" /><meta content="website" property="og:type" /><meta content="Annideas?" itemprop="name" /><meta content="http://blog.annideas.com/images/logo.png" property="og:image" /><meta content="width=device-width; initial-scale=1.0" name="viewport" /><link href="../../stylesheets/application-d069c6fa.css" rel="stylesheet" /><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script><script src="../../javascripts/application-139c3f48.js"></script><link href="/images/icon-f0edf780.png" rel="shortcut icon" /></head><body class="ironman ironman_2014-10-25-ruby-girl-25-ruby-method-def-undef ironman_2014-10-25-ruby-girl-25-ruby-method-def-undef_index"><div class="wrapper"><a class="go_home_logo" href="/"><img src="../../images/go_home_logo-55ba1e01.png" /><h1 class="title">Annideas?</h1></a><div class="container"><div class="articleContent"><div class="articleContent-category"><a href="/ironman7">鐵 人</a></div><div class="articleContent-title">Ruby女孩(25)：來認識方法的定義與解除！</div><div class="articleContent-date">2014．Oct．25</div><div class="articleContent-article tp-in-content"><p>從Ruby女孩(18)一直到Ruby女孩(24)我們都聚焦在【The Ruby Programming Language】這本書的第七章『類別與模組』上：</p>

<ul>
  <li><a href="../2014-10-18-ruby-girl-18-ruby-class-diy/">Ruby女孩(18)</a> =&gt; 定義簡單的類別</li>
  <li><a href="../2014-10-19-ruby-girl-19-ruby-class-getter-setter/">Ruby女孩(19)</a> =&gt; 說明getter、setter與accessor method</li>
  <li><a href="../2014-10-20-ruby-girl-20-ruby-instance-and-class-methods/">Ruby女孩(20)</a> =&gt; 說明實體方法與類別方法的差異</li>
  <li><a href="../2014-10-21-ruby-girl-21-ruby-instance-and-class-variables/">Ruby女孩(21)</a> =&gt; 說明類別變數與類別實體變數的差異</li>
  <li><a href="../2014-10-22-ruby-girl-22-ruby-public-protected-private-methods/">Ruby女孩(22)</a> =&gt; 說明public、protected與private方法的差異</li>
  <li><a href="../2014-10-23-ruby-girl-23-ruby-inherit/">Ruby女孩(23)</a> =&gt; 說明類別的繼承關係與子類別覆蓋方法方式</li>
  <li><a href="../2014-10-24-ruby-girl-24-ruby-module-class/">Ruby女孩(24)</a> =&gt; 說明模組與類別的差異與mixin作用</li>
</ul>

<p>類別與模組我們要先告一段落了，我們曾在上面這七天看過很多方法的定義，今天來研究一下方法在定義上有什麼規則需要注意！</p>

<h2 id="section">定義簡單的方法</h2>

<p>方法的定義會使用<code>def</code>關鍵字，<code>def</code>後面空一格接方法的名稱，名稱旁接著<code>( )</code>，<code>( )</code>中可放入參數，後方再接著方法的內容，最後以<code>end</code>關鍵字為結尾。要注意：</p>

<ol>
  <li>方法的名稱有規定寫法，待下方再做解釋</li>
  <li>( )通常可省略，但也有不可省略之時，也是待下方再做解釋</li>
  <li>( )中的參數，可直接作為方法程式碼中的變數(參數所提供的值，為調用方法時所給的引數)</li>
</ol>

<p>來看看範例：</p>

<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">my_age</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>  
  <span class="s2">"I'm </span><span class="si">#{</span><span class="n">age</span><span class="si">}</span><span class="s2"> years old!"</span>  
<span class="k">end</span>  
</code></pre>

<p>方法名稱：my_age
圓括號中的參數：age</p>

<pre class="highlight ruby"><code><span class="n">my_age</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>  
  
<span class="c1">#當調用my_age方法時可以直接在後方加入引數，此引數將引入程式碼的相同名稱的變數位置！  </span>
  
<span class="o">=&gt;</span> <span class="s2">"I'm 20 years old!"</span>  
</code></pre>

<h2 id="section-1">方法的回傳值</h2>

<p>所定義的方法如果能夠正常執行，會自動以方法的最後一個運算式來當作回傳值，例如：</p>

<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">who_will_return</span>  
  <span class="mi">1</span><span class="o">+</span><span class="mi">1</span>  
  <span class="s2">"Ruby"</span>  
  <span class="s2">"Linda"</span>  
<span class="k">end</span>  
  
<span class="n">who_will_return</span>  
<span class="o">=&gt;</span> <span class="s2">"Linda"</span>  
</code></pre>

<p>在箭號右方的就是回傳值，<code>"Linda"</code>是此方法的最後一行，因此會以此行作為回傳值。</p>

<p>在方法中若加入<code>return</code>關鍵字，則是強制讓此方法直接跳到結尾，例如：</p>

<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">who_will_return</span>  
  <span class="mi">1</span><span class="o">+</span><span class="mi">1</span>  
  <span class="k">return</span> <span class="s2">"Ruby"</span>  
  <span class="s2">"Linda"</span>  
<span class="k">end</span>  
  
<span class="n">who_will_return</span>  
<span class="o">=&gt;</span> <span class="s2">"Ruby"</span>  
</code></pre>

<p>也可以在<code>return</code>後方加入判斷式：</p>

<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">who_will_return</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>  
  <span class="mi">1</span><span class="o">+</span><span class="mi">1</span>  
  <span class="k">return</span> <span class="k">if</span> <span class="mi">1</span><span class="o">+</span><span class="n">n</span><span class="o">&gt;=</span><span class="mi">30</span>  
  <span class="s2">"Linda"</span>  
<span class="k">end</span>  
  
<span class="n">who_will_return</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  
<span class="o">=&gt;</span> <span class="s2">"Linda"</span>  
  
<span class="n">who_will_return</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>  
<span class="o">=&gt;</span> <span class="kp">nil</span>  
</code></pre>

<h2 id="section-2">調用物件的方法</h2>

<p>方法的調用總是針對一個物件來進行，你可以注意到，我們前面在調用方法時，都會在某物件後面加上<strong>『.方法』</strong>，物件通常被稱為接收器，而方法稱為訊息，而Ruby都是使用<strong>『.』</strong>來分隔物件與方法。</p>

<h2 id="singleton-method">定義單體方法(singleton method)</h2>

<p>今天的文章到目前為止所定義的方法都是全域性的方法，前幾天的文章也介紹過在類別裡面有所謂實體方法與類別方法，今天要再另一種替特定物件定義的方法，稱為<strong>單體方法(singleton method)</strong>，它只能被使用在單一物件上，它的定義方式為：</p>

<pre class="highlight ruby"><code><span class="n">aaa</span> <span class="o">=</span> <span class="s2">"我愛Ruby"</span>  
  
<span class="k">def</span> <span class="nc">aaa</span><span class="o">.</span><span class="nf">hello</span>      <span class="c1">#替aaa物件定義一個單體方法  </span>
  <span class="s2">"Hello World!"</span>  
<span class="k">end</span>  
  
<span class="n">aaa</span><span class="p">.</span><span class="nf">hello</span>  
<span class="o">=&gt;</span> <span class="s2">"Hello World!"</span>  
  
<span class="n">bbb</span> <span class="o">=</span> <span class="s2">"我愛Python"</span>  
<span class="o">=&gt;</span> <span class="s2">"我愛Python"</span>  
  
<span class="n">bbb</span><span class="p">.</span><span class="nf">hello</span>  
<span class="no">NoMethodError</span><span class="p">:</span> <span class="n">undefined</span> <span class="nb">method</span> <span class="sb">`hello' for "我愛Python":String  
</span></code></pre>

<p>可以注意到<code>hello</code>這個方法是屬於<code>aaa</code>的單體方法，所以<code>bbb</code>是不能調用的！</p>

<p>有沒有發現這種定義方法跟什麼很像呢？我們在前面的文章中有提到類別中的類別方法，是這樣定義的：</p>

<pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">RubyGirl</span>  
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">hello</span>  
  <span class="k">end</span>  
<span class="k">end</span>  
</code></pre>

<p>或</p>

<pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">RubyGirl</span>  
  <span class="k">def</span> <span class="nc">RubyGirl</span><span class="o">.</span><span class="nf">hello</span>  
  <span class="k">end</span>  
<span class="k">end</span>  
</code></pre>

<p>類別方法的定義方式跟單體方法很像，是的沒錯！
其實，類別方法就是單體方法！！！！
其實，類別方法就是單體方法！！！！
其實，類別方法就是單體方法！！！！</p>

<p>單體方法不是通用在所有物件上的，Numeric類別與Symbol值都不能使用！書中指出：</p>

<blockquote>
  <p>『Ruby將Fixnum與Symbol視為立即值，而非真正的物件參照，因此不適用單體方法』(p.185)：</p>
</blockquote>

<pre class="highlight ruby"><code><span class="n">a</span> <span class="o">=</span> <span class="ss">:rubyruby</span>  
  
<span class="k">def</span> <span class="nc">a</span><span class="o">.</span><span class="nf">hello</span>  
  <span class="s2">"Hello World"</span>  
<span class="k">end</span>  
  
<span class="no">TypeError</span><span class="p">:</span> <span class="n">can</span><span class="err">'</span><span class="n">t</span> <span class="n">define</span> <span class="n">singleton</span>  
</code></pre>

<h2 id="section-3">解除方法的定義</h2>

<p>我們用<code>def</code>定義一個方法，可以用<code>undef</code>來解除方法的定義，例如：</p>

<pre class="highlight ruby"><code><span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>  
  <span class="n">x</span><span class="o">+</span><span class="n">y</span>  
<span class="k">end</span>  
  
<span class="k">undef</span> <span class="n">sum</span> <span class="c1">#解除sum這個方法  </span>
</code></pre>

<p>在類別的繼承關係中也可以使用，例如父類別的m方法繼承到了子類別，但子類別不想用到這個方法，就可以undef m，只是這種方式不常用，通常都是定義新的方法來使用，而非刪除舊的方法。</p>

<p>另外，<code>def</code>可以定義單體方法，但<code>undef</code>不能解除單體方法！</p>

<p>後面的章節還有提到『方法的名稱』、『方法與圓括號』與『方法的引數』，明日再來說明！</p>

<hr />

<p>25天！</p>

<blockquote>
  <p>“Adventure may hurt you, but monotony will kill you.”</p>
</blockquote>

<p>還有5天！沒想到也持續了25天了！繼續享受在Ruby中的adventure！</p>
</div><div class="articleContent-social"><div id="fb-root"></div><script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v2.7&appId=838413066169349";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script><div class="fb-like" data-action="like" data-href="http://blog.annideas.com/ironman/2014-10-25-ruby-girl-25-ruby-method-def-undef/" data-layout="button_count" data-share="true" data-show-faces="true" data-size="small" data-width="700px"></div></div><div class="articleContent-paging"><a class="articleContent-paging-item articleContent-paging-item--prev" href="../2014-10-26-ruby-girl-26-ruby-method-rule/"><div class="articleContent-paging-item-title single-dot">Ruby女孩(26)：別鬧了，方法的( )別亂省！</div><div class="articleContent-paging-item-date">2014．Oct．26</div></a><a class="articleContent-paging-item articleContent-paging-item--next" href="../2014-10-24-ruby-girl-24-ruby-module-class/"><div class="articleContent-paging-item-title single-dot">Ruby女孩(24)：模組是不生孩子的！模組與類別差異及mixin介紹</div><div class="articleContent-paging-item-date">2014．Oct．24</div></a></div><div id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
                  var disqus_shortname = 'otiannie5';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div><div class="designer">Designed with <span class="love">❤</span> by <a href="http://otischou.tw/">Otis Chou</a></div></div><div class="menu_icon_block" data-show-menu=""><div class="menu_icon"></div></div><div class="mask" data-hide-menu=""></div><nav><img class="close" data-hide-menu="true" src="../../images/cross-e391fcc8.svg" /><div class="avatar"><a href="/"><img src="../../images/annie_pic-a20039dc.jpg" /></a></div><div class="social_link"><a target="_blank" href="/resume"><img class="resume" src="../../images/me-123f788f.svg" /></a><a target="_blank" href="https://twitter.com/_OtiAnn"><img class="twitter" src="../../images/twitter-e0f1f272.svg" /></a><a target="_blank" href="https://www.facebook.com/OtiAnn"><img class="facebook" src="../../images/facebook-368929ba.svg" /></a></div><div class="desc_block"><div class="name">陳祐禎 Annie</div><div class="description">A coach of Rails Girls Taiwan, a math teacher, a Rails developer.</div></div><ul class="catgory_list"><li><a class="life" href="/categories/生活/">生活 (3)</a></li><li><a class="edu" href="/categories/學習/">學習 (4)</a></li><li><a class="dev" href="/categories/開發/">開發 (7)</a></li><li><a href="/ironman7">鐵人賽文章 (30)</a></li></ul></nav><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-51807616-2', 'auto');
ga('send', 'pageview');</script></div></body></html>