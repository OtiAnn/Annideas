$().ready(function(){function e(e,t,n){d.push(e),v.push(t),r.push(n),w.push(g)}function t(){u.fillStyle="#ffffff",u.fillRect(0,0,c,a),s.width=s.width}function n(){t();var e=5;u.lineJoin="round",u.lineWidth=e;for(var n=0;n<d.length;n++)u.beginPath(),r[n]&&n?u.moveTo(d[n-1],v[n-1]):u.moveTo(d[n]-1,v[n]),u.lineTo(d[n],v[n]),u.closePath(),u.strokeStyle=w[n],u.stroke()}function o(e,t){var n=e.getBoundingClientRect();return{x:t.touches[0].clientX-n.left,y:t.touches[0].clientY-n.top}}var u,i=document.getElementById("canvasDiv"),s=document.createElement("canvas"),c=300,a=300,f=!1,d=[],v=[],r=[],l="#334455",h="#659b41",m="#ffcf33",p="#986928",g=l,w=[];s.setAttribute("width",c),s.setAttribute("height",a),s.setAttribute("id","canvas"),i.appendChild(s),"undefined"!=typeof G_vmlCanvasManager&&(s=G_vmlCanvasManager.initElement(s)),u=s.getContext("2d"),$("#canvas").mousedown(function(t){t.pageX-this.offsetLeft,t.pageY-this.offsetTop;f=!0,e(t.pageX-this.offsetLeft,t.pageY-this.offsetTop),n()}),$("#canvas").mousemove(function(t){f&&(e(t.pageX-this.offsetLeft,t.pageY-this.offsetTop,!0),n())}),$("#canvas").mouseup(function(e){f=!1,n()}),$("#canvas").mouseleave(function(e){f=!1}),$("#choosePurple").mousedown(function(e){g=colorPurple}),$("#chooseGreen").mousedown(function(e){g=h}),$("#chooseYellow").mousedown(function(e){g=m}),$("#chooseBrown").mousedown(function(e){g=p}),$("#clearCanvas").mousedown(function(e){d=[],v=[],r=[],w=[],t()}),s.addEventListener("touchstart",function(e){mousePos=o(s,e);var t=e.touches[0],n=new MouseEvent("mousedown",{clientX:t.clientX,clientY:t.clientY});s.dispatchEvent(n)},!1),s.addEventListener("touchend",function(e){var t=new MouseEvent("mouseup",{});s.dispatchEvent(t)},!1),s.addEventListener("touchmove",function(e){var t=e.touches[0],n=new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY});s.dispatchEvent(n)},!1),document.body.addEventListener("touchstart",function(e){e.target==s&&e.preventDefault()},!1),document.body.addEventListener("touchend",function(e){e.target==s&&e.preventDefault()},!1),document.body.addEventListener("touchmove",function(e){e.target==s&&e.preventDefault()},!1)});